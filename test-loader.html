<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Browse quizzes by category on Quizetron. Choose from Intelligence, Horror, Pop, Rock, Sci-Fi, Apocalypse, Government, Meme and Emotions to test your knowledge with fun quizzes."
    />
    <title>Quizetron - Test Loader</title>
    <link rel="stylesheet" href="test-loader.css" />
    <link rel="stylesheet" href="ads.css" />
    <!-- NEW: ads grid and overlay styling -->
  </head>
  <body>
    <video autoplay muted loop playsinline class="video-background">
      <source src="media/indexBG.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>

    <div class="overlay"></div>

    <div class="content">
      <h1>Quizetron</h1>
      <h2><span id="categoryName">All Categories</span></h2>

      <div
        id="categoryDescription"
        style="
          margin-top: 2rem;
          max-width: 800px;
          margin-left: auto;
          margin-right: auto;
          text-align: center;
          color: #ccc;
        "
      >
        <p id="descText">
          Explore our diverse quiz categories designed to challenge your
          knowledge, test your intelligence, and entertain you with fun
          scenarios. From survival challenges to personality tests, find quizzes
          that match your interests.
        </p>
      </div>

      <div id="testGrid" class="test-grid">
        <noscript>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=apocalypse'"
          >
            <span class="icon">â˜¢ï¸</span><br />Apocalypse
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=government'"
          >
            <span class="icon">ğŸ›ï¸</span><br />Government
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=horror'"
          >
            <span class="icon">ğŸ§Ÿ</span><br />Horror
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=intelligence'"
          >
            <span class="icon">ğŸ§ </span><br />Intelligence
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=meme'"
          >
            <span class="icon">ğŸ˜¹</span><br />Meme
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=pop'"
          >
            <span class="icon">ğŸ¤</span><br />Pop
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=rock'"
          >
            <span class="icon">ğŸ¸</span><br />Rock
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=scifi'"
          >
            <span class="icon">ğŸ‘½</span><br />Sci-Fi
          </div>
          <div
            class="test-card"
            onclick="window.location.href='test-loader.html?category=emotions'"
          >
            <span class="icon">â“</span><br />Emotions
          </div>
        </noscript>
      </div>

      <div id="backBtnContainer" style="margin-top: 2rem; display: none">
        <a href="test-loader.html" class="back-link">â† Back to Categories</a>
      </div>
    </div>

    <!-- Sponsored Ad Grid -->
    <div class="sponsored-label">Sponsored Ads</div>
    <div id="ad-grid">
      <div id="ad1" class="ad-tile"></div>
      <div id="ad2" class="ad-tile"></div>
      <div id="ad3" class="ad-tile"></div>
      <div id="ad4" class="ad-tile"></div>
    </div>

    <footer>
      <a href="legal/privacy.html">Privacy</a>
      <a href="legal/terms.html">Terms</a>
      <a href="legal/disclaimer.html">Disclaimer</a>
      <a href="legal/copyright.html">Copyright</a>
    </footer>

    <script src="ads.js"></script>
    <!-- NEW: central ad loader -->
    <script src="util.js"></script>
    <script src="test-loader.js"></script>

    <script>
      function suppressSpecificError(event) {
        if (
          event.message &&
          event.message.includes("Failed to load resource") &&
          event.target &&
          event.target.tagName === "SCRIPT"
        ) {
          event.stopImmediatePropagation();
          event.preventDefault();
        }
      }

      window.addEventListener("error", suppressSpecificError, true);

      // Dynamically insert ads into the grid
      insertAd("ad1", { slot: "1234567890" }); // TODO: Replace with real slot IDs
      insertAd("ad2", { slot: "2345678901" });
      insertAd("ad3", { slot: "3456789012" });
      insertAd("ad4", { slot: "4567890123" });

      // Handle back button visibility
      document.addEventListener("DOMContentLoaded", () => {
        const backBtn = document.getElementById("backBtnContainer");
        const categoryName = document.getElementById("categoryName");
        if (
          categoryName.textContent.trim().toLowerCase() === "all categories"
        ) {
          backBtn.style.display = "none";
        } else {
          backBtn.style.display = "block";
        }
      });
    </script>
  </body>
</html>
